<main>
    <div>
      <app-header></app-header>
    </div>
    <div class="page">
      <app-aside [mode]="'ingeniero'"></app-aside>
      <div class="container-page">
        <app-subheader [title]="'Bienvenido!'" ></app-subheader>
        <div class="content">
          <h1>Lista de Presupuestos Cotizados</h1>
          <div class="row">
            <div class="col-12 col-md-8">
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Cliente</th>
                        <th scope="col">Fecha</th>
                        <th scope="col">Total</th>
                        <th scope="col">Descargar</th>
                      </tr>
                    </thead>
                    <tbody>
                     <tr *ngFor="let item of presupuestosCotizados;let i = index;">
                        <td> {{i +1}} </td>
                        <td> {{item.full_name}} </td>
                        <td> {{item.createAt | date}} </td>
                        <td> {{item.total | currency}} </td>
                        <td> <button class="btn btn-danger" (click)="generatePDF(item)">PDF</button> </td>
                     </tr>
                    </tbody>
                  </table>
            </div>
          </div>
        
        
        </div>
      </div>
    </div>
  </main>
  
  <div class="table" id="pdf" *ngIf="presupuestoSelected">
    <section style="margin-top: 30; padding-top: 30px; margin: 0 auto">
      <article style="width: 100%; display: flex; justify-content: space-between">
        <div
          style="
            align-items: center;
            display: flex;
            justify-content: center;
            padding: 0 10px;
            width: 100%;
          "
        >
          <!-- 
            <img style="width: 260px" src="../../../../../assets/logo.PNG" alt="" />
          -->
          <h1><strong>LOGO DE LA EMPRESA</strong></h1>
        </div>
        <div>  
          <div style="display: flex; flex-direction: column; margin-top: 5px">
            <div style="padding: 1px 10px; background-color: #e7e7e7">
              <h1
                style="
                  font-weight: 700;
                  font-size: 17px;
                  line-height: 30px;
                  letter-spacing: 0px;
                  color: #000000;
                  text-align: center;
                  text-transform: uppercase;
                  margin: 0;
                "
              >
                <strong> Datos del Presupuesto </strong>
              </h1>
            </div>
            <div style="display: flex; width: 500px">
              <div>
               
                <p
                  style="
                    font-weight: 600;
                    font-size: 16px;
                    line-height: 30px;
                    color: #000000;
                    text-align: left;
                  "
                >
                  Fecha 
                </p>
             
              </div>
              <div style="padding-left: 10px">
               
                <p
                  style="
                    font-weight: 400;
                    font-size: 16px;
                    line-height: 30px;
                    color: #000000;
                    text-align: left;
                  "
                >
                  <strong>
                    {{
                      presupuestoSelected.createAt | date: "dd/MM/yyyy hh:mm"
                    }}</strong
                  >
                </p>
              
              </div>
            </div>
          </div>
        </div>
      </article>
      <article style="margin-top: 5px">
        <div
          style="display: flex; flex-direction: column; width: 100% !important"
        >
          <div style="padding: 1px 10px; background-color: #e7e7e7">
            <h1
              style="
                font-weight: 600;
                font-size: 17px;
                line-height: 30px;
                letter-spacing: 0px;
                color: #000000;
                text-align: center;
                text-transform: uppercase;
                margin: 0;
              "
            >
              <strong> Datos del Cliente </strong>
            </h1>
          </div>
          <div style="display: flex; width: 750px">
            <div>
              <p
                style="
                  font-weight: 600;
                  font-size: 16px;
                  line-height: 30px;
                  color: #000000;
                  text-align: left;
                "
              >
                <strong> Nombre </strong>
              </p>
              <p
                style="
                  font-weight: 600;
                  font-size: 16px;
                  line-height: 30px;
                  color: #000000;
                  text-align: left;
                "
              >
                <strong> Correo </strong>
              </p>
              <p
              style="
                font-weight: 600;
                font-size: 16px;
                line-height: 30px;
                color: #000000;
                text-align: left;
              "
            >
              <strong> Asunto </strong>
            </p>
            </div>
            <div style="margin-left: 15px">
              <p
            
                style="
                  font-weight: 400;
                  font-size: 16px;
                  line-height: 30px;
                  color: #000000;
                  text-align: left;
                "
              >
                {{ presupuestoSelected.full_name }}
              </p>
              <div>
                <p
                  style="
                    font-weight: 600;
                    font-size: 16px;
                    line-height: 30px;
                    color: #000000;
                    text-align: left;
                    align-self: center;
                  "
                >
                  <span>
                    {{ presupuestoSelected.email }}
                  </span>
                    
                  
                </p>
                <p
                style="
                  font-weight: 600;
                  font-size: 16px;
                  line-height: 30px;
                  color: #000000;
                  text-align: left;
                  align-self: center;
                "
              >
                <span>
                 Cotizaci√≥n
                </span>
                  
                
              </p>
              </div>
            </div>
          </div>
        </div>
      </article>
      <table style="margin-top: 5px; width: 100%; background-color: white">
        <tr>
         
          <th
            style="
              padding: 5px 10px;
              font-weight: medium;
              font-size: 16px;
              line-height: 30px;
              color: #000000;
              background-color: #e7e7e7;
            "
          >
            Actividad / Descripcion
          </th>
          <th
            style="
              padding: 5px 10px;
              font-weight: medium;
              font-size: 16px;
              line-height: 30px;
              color: #000000;
              background-color: #e7e7e7;
            "
          >
            Cantidad
          </th>
          <th
          style="
            padding: 5px 10px;
            font-weight: medium;
            font-size: 16px;
            line-height: 30px;
            color: #000000;
            background-color: #e7e7e7;
          "
        >
          Unidad
        </th>
        <th
        style="
          padding: 5px 10px;
          font-weight: medium;
          font-size: 16px;
          line-height: 30px;
          color: #000000;
          background-color: #e7e7e7;
        "
      >
        Precio unitario
      </th>
      <th
      style="
        padding: 5px 10px;
        font-weight: medium;
        font-size: 16px;
        line-height: 30px;
        color: #000000;
        background-color: #e7e7e7;
      "
    >
      subtotal
    </th>
         
        </tr>
        <tr *ngFor="let item of presupuestoSelected.actividades">
         
          <td style="padding: 10px 10px 20px">
            <p
              style="
                font-weight: 500;
                font-size: 16px;
                line-height: 20px;
                color: #000000;
                text-align: left;
              "
            >
              {{ item.description }} <br />
            </p>
          </td>
  
          <td style="padding: 10px 10px 20px">
            <p
              style="
                font-weight: 500;
                font-size: 16px;
                line-height: 20px;
                color: #000000;
                text-align: left;
              "
            >
              {{ item.cantidad }} <br />
            </p>
          </td>
          
          <td style="padding: 10px 10px 20px">
            <p
              style="
                font-weight: 500;
                font-size: 16px;
                line-height: 20px;
                color: #000000;
                text-align: left;
              "
            >
              {{ item.unidad }} <br />
            </p>
          </td>
  
          <td style="padding: 10px 10px 20px">
            <p
              style="
                font-weight: 500;
                font-size: 16px;
                line-height: 20px;
                color: #000000;
                text-align: left;
              "
            >
              {{ item.precioUnitario | currency }} <br />
            </p>
          </td>
  
          <td style="padding: 10px 10px 20px">
            <p
              style="
                font-weight: 500;
                font-size: 16px;
                line-height: 20px;
                color: #000000;
                text-align: left;
              "
            >
              {{ item.subTotal | currency }} <br />
            </p>
          </td>
        </tr>
      
      </table>
      
      <div
        style="
          display: flex;
          flex-direction: column;
          width: 100% !important;
          margin-top: 20px;
        "
      >
        <div style="padding: 1px 10px; background-color: #e7e7e7">
          <h1
            style="
              font-weight: 700;
              font-size: 17px;
              line-height: 30px;
              letter-spacing: 0px;
              color: #000000;
              text-transform: uppercase;
              margin: 0;
            "
          >
            <strong> Total </strong>
          </h1>
        </div>
        <div style="display: flex; width: 750px">
          <p
            style="
              font-weight: 600;
              font-size: 16px;
              line-height: 30px;
              color: #000000;
              text-align: left;
            "
          >
            <span >
              <strong>{{presupuestoSelected.total | currency }}</strong
              ><br />
            </span>
          </p>
        </div>
      </div>
      <article
        style="
          margin-top: 120px;
          width: 100%;
          display: flex;
          justify-content: space-between;
          margin-bottom: 60px;
        "
      >
        <div style="margin: 0 auto">
          <div style="display: flex; justify-content: center">
            <div
              style="
                width: 100%;
                padding: 10px 10px 0;
                padding-left: 0;
                display: flex;
                justify-content: center;
              "
            >
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  padding-top: 5px;
                  padding-bottom: 5px;
                  width: 100%;
                "
              >
                <p
                  style="
                    width: 100%;
                    text-align: center;
                    display: flex;
                    justify-content: center;
                  "
                >
                  <!--
                    <img
                    style="max-width: 148px"
                    [src]="presupuesto.doctor_signature"
                    alt="doctor_signature"
                  />
                  -->
                </p>
                <div style="width: 184px">
                  <hr />
                </div>
                <h1
                  style="
                    font-weight: 400;
                    color: #000000;
                    text-align: center;
                    font-size: 15px;
                    line-height: 20px;
                    margin-bottom: 40px;
                  "
                >
                  Firma del Ingeniero
                </h1>
              </div>
  
             
            </div>
          </div>
        </div>
      </article>
    
    </section>
  </div>